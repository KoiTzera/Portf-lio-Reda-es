const redacoes = [
    {
        id: 0,
        titulo: "Por que os procedimentos estéticos estão aumentando entre os jovens?",
        descricao: "Análise do crescimento de procedimentos estéticos na juventude",
        categoria: "social",
        textoCompleto: `
            <h3>Quem sou eu no Mundo</h3>
            <p>Ultimamente, é notável o aumento de jovens, até mesmo adolescentes, buscando tratamentos de beleza. O que antes era mais comum entre adultos, agora é parte do dia a dia de uma geração que cresceu em meio a filtros, redes sociais e ideias de beleza perfeitas. Mas, afinal, por que isso está ocorrendo?</p>
            
            <p>Um dos maiores motivos é a frequente presença na internet, principalmente em plataformas como Instagram e TikTok, onde a aparência tem grande importância. Personalidades da internet e famosos, com rostos e corpos muitas vezes transformados por procedimentos, acabam se tornando modelos a serem seguidos. Isso causa uma pressão forte para que os jovens se encaixem nesses padrões, mesmo que isso signifique modificar seus corpos em desenvolvimento.</p>
            
            <p>Ademais, a autoconfiança dos jovens pode ser abalada nessa fase da vida. A comparação com os outros, junto com as inseguranças normais da adolescência, cria um ambiente propício para a insatisfação com a própria imagem. O que antes se resolvia com tempo, autoconhecimento e apoio, agora é trocado por soluções rápidas como preenchimentos, harmonizações e outros tratamentos.</p>
            
            <p>Contudo, é crucial pensar sobre os perigos dessa moda. Tratamentos de beleza não são simples: envolvem perigos, gastos e, em muitos casos, impactos emocionais. A beleza deveria ser algo natural, diverso e leve, e não uma obrigação imposta por um ideal impossível de alcançar.</p>
        `
    },
    {
        id: 1,
        titulo: "Acessibilidade e inclusão de pessoas com deficiência no Brasil",
        descricao: "Desafios e caminhos para a inclusão social",
        categoria: "social",
        textoCompleto: `
            <h3>Por que os procedimentos estéticos estão aumentando entre os jovens</h3>
            
            <p>A inclusão e acessibilidade de pessoas com deficiência no Brasil ainda enfrenta desafios cotidianos que espelham profundas desigualdades. Inegavelmente, há leis que garantem direitos, como a Lei Brasileira de inclusão, mas a realidade em ruas, escolas e ambientes de trabalho mostra que cumprir essas normas é,  muitas vezes, uma mera formalidade. Rampas mal projetadas, transporte público ineficiente e a falta de intérpretes de Libras para serviços essenciais são exemplos de barreira que dificultam a plena inclusão social.</p>
            
            <p>Mais do que adaptar espaços, mudamos mentalidades. Muitas pessoas com deficiência  praticadas preconceito velado, sendo vistas como incapazes ou dependentes, quando na, realidade, são apenas pessoas que necessitam das condições e de oportunidades para evidenciar seu taleto. Inclusão e respeito às diferenças e reconhecimento ao valor de cada uma pessoa.</p>

            <p>Investir em acessibilidade não é uma questão de beneficiar somente quem tem alguma deficiência. Espaços mais acessíveis são melhores para idosos, gestantes e até para quem enfrenta uma limitação temporária.</p>

            <p>É uma questão de cidania e empatia.
Portanto, surge que o Brasil passe de letra para a prática, implantando políticas públicas eficientes, fiscalizando e fometando a adaptação de espaços e serviços. Inclusão não é apenas cumprir a lei, mas sim construir uma sociedade.</p>
        `
    },
    {
        id: 2,
        titulo: "Principais fatores que influenciam na qualidade e no Bem-Estar da população",
        descricao: "Análise dos determinantes da qualidade de vida",
        categoria: "social",
        textoCompleto: `
            <h3>Acessibilidade e inclusão de pessoas com deficiência no Brasil</h3>
            <p>Qualidade de vida não está atrelada unicamente ao dinheiro ou a conquistas materiais, esse conceito se refere ao modo de vida, ao bem estar cotidiano e as chances que a vida oferece ao longo do tempo. No nosso país, Brasil, e em várias partes do mundo, essa vida não é igual para todas as pessoas, e alguns fatores se tornam fundamentais para que alguém viva bem ou mal.
</p>
    
            <p>Sem dúvidas, a saúde é um dos fatores mais relevantes. O acesso a um médico, medicamentos ou até mesmo um hospital, deveria ser mais simples, mas não é. Muitas pessoas enfrentam longas filas, falta de local para atender e até mesmo a ausência de radiologia, um cenário que é nocivo para a saúde da pessoa. Isto é, a saúde se torna um fardo. Tanto do ponto de vista da segurança, quanto a violência, viver em áreas que são dominadas por esses tipos de violência, em geral, o que oferece um viver permanente de medo, e acarreta um impacto ao cotidiano e ao convívio comunitário.</p>
            
            <p>Na sua falta, o impacto da educação é bastante significativo. Uma escola de qualidade é capaz de ampliar horizontes, possibilitando um melhor desenvolvimento pessoal e auxiliando na construção de um futuro mais promissor. Junto disso, vem a questão do trabalho digno, que oferece não apenas renda, mas também tranquilidade emocional, já que ninguém consegue ter bem-estar vivendo sob preocupação constante com contas e dívidas. 
</p>
            <p>Por isso, falar em qualidade de vida é falar de equilíbrio entre saúde, segurança, educação e oportunidades reais. Cabe ao poder público criar políticas que aproximem esses direitos de todos os cidadãos, reduzindo desigualdades. Só assim será possível transformar o bem-estar em algo presente na rotina da maioria da população, e não em um privilégio restrito a poucos.</p>
        `
    },
    {
        id: 3,
        titulo: "As mudanças climáticas no brasil e seus desafios",
        descricao: "Impactos e soluções para as mudanças climáticas no país",
        categoria: "environment",
        textoCompleto: `
            <h3>Principais fatores que influenciam na qualidade e no Bem-Estar da população</h3>
            <p>As mudanças climáticas já impactam o cotidiano de muitas pessoas no Brasil de forma direta, e não é só uma questão de ciência distante. Quando a chuva demora demais ou cai com tanta força que alaga tudo, quem vive no campo ou nas cidades acaba sofrendo com a falta de alimentos, água e até moradia. Esses problemas mudam não só o ambiente, mas as histórias de famílias inteiras que lutam para seguir a vida.</p>
            
            <p>A destruição das florestas, principalmente na Amazônia, vai além de matar árvores — ela afeta o ciclo das águas e o equilíbrio do clima. Cidades que antes eram fresquinhas começam a sentir o calor aumentar, e a falta de água vira uma preocupação constante. Quem tem menos recursos sente essa realidade ainda mais de perto, pois não tem como se proteger facilmente contra esses impactos.</p>
            
            <p>O dilema de crescer economicamente sem destruir o meio ambiente é algo que o Brasil precisa resolver com urgência. Muitas vezes, decisões imediatistas acabam prejudicando o que é essencial para a vida – a natureza. Preservar os rios, as matas e combater o desmatamento não é só cuidar de plantas e animais, mas garantir que crianças, jovens e idosos tenham uma vida digna no futuro.
</p>

            <p>Por isso, ações que incentivem a sustentabilidade e o consumo consciente precisam ser prioridade para governos, empresas e para cada pessoa. Informar e engajar a população sobre a importância de pequenas mudanças no dia a dia pode salvar vidas e ajudar a proteger o planeta. Afinal, cuidar do meio ambiente é cuidar do futuro de todos.</p>
        `
    },
    {
        id: 4,
        titulo: "As consequências do descarte do lixo eletrônico",
        descricao: "Impactos ambientais do descarte inadequado de eletrônicos",
        categoria: "environment",
        textoCompleto: `
            <h3>As mudanças climáticas no brasil e seus desafios</h3>
            <p>Sabe quando a gente troca de celular, notebook ou qualquer eletrônico e nem pensa no que vai acontecer com o aparelho antigo? Essa coisa de jogar fora o lixo eletrônico parece simples, mas pode causar um baita problema para o meio ambiente e até para a saúde das pessoas.
</p>
            
            <p>Esses eletrônicos têm coisas tóxicas dentro, tipo chumbo e mercúrio, que, se jogados no lixo normal, acabam sujando o chão e a água que a gente usa todo dia. Aqui perto de casa, tem gente que vive catando esse lixo para tentar ganhar uma grana, mas sem proteção nenhuma, e isso pode acabar fazendo muito mal pra eles.
</p>
            
            <p>Outra coisa chata é que muito do que podia ser reciclado vai parar no lugar errado e acaba sendo jogado fora sem necessidade. São materiais valiosos, como ouro e cobre, que poderiam ser reaproveitados várias vezes. E aí, quando isso acontece, a gente precisa extrair mais desses materiais da natureza, destruindo florestas, poluindo rios... Ou seja, piorando ainda mais a situação da Terra.</p>

            <p>Eu acho que a gente devia ficar mais ligado nisso e sempre tentar levar esses eletrônicos para lugares certos, onde tem pontos de coleta. Se escolas, famílias e a galera começassem a levar isso mais a sério, poderia fazer muita diferença.</p>
        `
    },
    {
        id: 5,
        titulo: "O consumo de ultraprocessados e suas consequências a saúde",
        descricao: "Riscos do consumo excessivo de alimentos industrializados",
        categoria: "education",
        textoCompleto: `
            <h3>As consequências do descarte do lixo eletrônico</h3>
            <p>Nos anos anteriores, vimos um aumento no consumo de alimentos ultraprocessados, que, por sua vez, se tornaram parte da rotina diária de um número considerável de brasileiros. A Polícia Sanitária do Brasil observou um aumento no consumo de produtos ultraprocessados nos últimos anos, e infelizmente esses produtos apresentam preocupações de saúde; e sua natureza barata e conveniente traz um alto risco de promover benefícios à saúde a curto prazo.
</p>
            
            <p>A alimentação nos anos anteriores, de modo geral, era feita de elementos de qualidade e cheios de nutrientes. Com a vinda da era da independência, juntamente, com a mudança no modo de vida, tornou-se a independência, portanto, rápida e barata. Por outro lado, o aumento dos ultraprocessados associados à obesidade e outras doenças crônicas se tornou um novo desafio para a nossa saúde e precisa de uma reflexão. E, nesse aspecto, a exposição de Aristóteles sobre a ‘vida boa’ é bastante pertinente A, visto que é ideal para garantir saúde, requerendo uma seleção mais variada de alimentos.
</p>
            
            <p>Outro aspecto da situação a discutir diz respeito à avassaladora parte da população, a Lig Advertising, que, ao despertar a ideia do consumo de alimentação ultraprocessada, e lhe torna mais úteis as chamadas “fast foods”, e mais do que isso, atinge especialmente as infâncias e juventudes. Desde 1988, a Lei de Fundação te assegura que complementam sua alimentação equilibrada, com um foco primário.
</p>

            <p>Portanto, cabe ao Estado embarcar em atividades educacionais e impor controles mais rigorosos sobre a indústria, enquanto a sociedade deve repensar seus hábitos de consumo. Com a combinação de esforços coletivos e individuais, é possível imaginar que o futuro será muito melhor e que a alimentação será fundamental para uma saúde e longevidade aprimoradas.</p>
        `
    },
    {
        id: 6,
        titulo: "Fatores e efeitos da dependência em jogos de apostas na web",
        descricao: "Análise dos riscos da dependência em apostas online",
        categoria: "social",
        textoCompleto: `
            <h3>O consumo de ultraprocessados e suas consequências a saúde</h3>
            <p>Hoje em dia, apostar em jogos pela internet virou algo que muitos jovens estão conhecendo e, infelizmente, alguns acabam se viciando sem nem perceber. Parece divertido no começo, aquela chance de ganhar dinheiro rápido, mas a verdade é que pode virar um problema bem sério. A dependência nesses jogos pode acabar afetando muito a vida da pessoa, e não só no bolso.</p>
            
            <p>Um dos motivos que fazem a gente cair nessa armadilha é que os jogos online são super fáceis de acessar. Com um celular na mão, dá pra entrar em vários sites ou aplicativos que parecem só brincadeira, mas funcionam com dinheiro de verdade. E para deixar a gente querendo mais, esses jogos criam aquelas promessas de premiações, bônus e “quase ganhei”, que acabam prendendo o jogador em um ciclo difícil de escapar.</p>
            
            <p>Essa dependência traz vários efeitos ruins. A pessoa começa a gastar mais do que podia, perde o foco nos estudos ou no trabalho e até se afasta da família e dos amigos. A vontade de continuar apostando vira uma ansiedade constante, como se não pudesse parar. É como se todo mundo ficasse em volta dela, mas ela estivesse presa naquele jogo.</p>
            
                      <p>Por isso, acho que a gente tem que ficar esperto e entender que a diversão pode virar um problema muito sério. A escola e a família também precisam ajudar, ensinando sobre os riscos e dando apoio para quem está passando por isso. Só quando a gente entender que o jogo online pode trazer muito mais prejuízo do que vantagem é que vai conseguir evitar essa dependência.</p>
                     `

    },
    {
        id: 7,
        titulo: "A importãncia do trabalho voluntário no combate às desigualdades sociais",
        descricao: "O papel do voluntariado na redução das desigualdades",
        categoria: "social",
        textoCompleto: `
            <h3>fatores e efeitos da dependência em jogos de apostas na web</h3>
            <p>Na real, o trabalho voluntário é algo que devia ser mais comum entre a gente, os jovens, porque ajuda muito a diminuir aquelas desigualdades que a gente vê todo dia nas ruas e até dentro da nossa escola. Tem muita gente passando aperto, enquanto a gente às vezes reclama de besteira. Já participei de algumas ações com a minha turma, tipo arrecadar roupas para quem precisa, e posso dizer que aquilo mexeu comigo. Não é só sobre dar coisas, mas também sobre sentir que a gente pode ser útil de verdade.</p>

            <p>Às vezes, um simples gesto, como ajudar alguém a estudar ou só ouvir uma história, faz um baita diferença para quem está enfrentando uma situação difícil. E, sinceramente, isso até muda a gente, porque passa a ver o mundo de outra forma, com mais empatia e menos julgamento. Acho que se a gente aprendesse mais sobre isso na escola, valorizar o trabalho voluntário, ia ser mais fácil se engajar.</p>
            
            <p>Também penso que não precisa ser nada complicado ou profissional. Qualquer esforço para ajudar já conta, mesmo que seja pouco tempo da semana. O importante é entender que a igualdade social só vai existir se todo mundo fizer sua parte, desde cedo.</p>   
            <p>No fim, o trabalho voluntário é uma chance da gente mostrar que, apesar das diferenças, a solidariedade pode ser o que une a gente de verdade. E quanto mais jovens perceberem isso, melhor vai ser o nosso futuro.</p>
        `
    },
    {
        id: 8,
        titulo: "Adultização infantil - consequências da perda irreparável da infância",
        descricao: "Impactos da adultização precoce das crianças",
        categoria: "social",
        textoCompleto: `
            <h3>A importãncia do trabalho voluntário no combate às desigualdades sociais</h3>
            <p>Hoje em dia, parece que as crianças estão crescendo muito rápido, como se tivessem que virar adultos antes da hora. Isso é o que chamam de adultização infantil, quando elas perdem aquela fase importante de brincar, sonhar e aprender no seu ritmo. E isso não é legal, porque a infância é a parte da vida onde a gente deveria aproveitar sem tanta pressão.</p>

            <p>Eu vejo que muitos amigos já ficam preocupados com coisa que nem devia ser problema para criança, tipo se a roupa está na moda, se estão passando tempo demais no celular ou até enrolados com prova na escola. Em vez de aproveitar para brincar na rua ou usar a imaginação, eles acabam sofrendo com ansiedade e estresse, que deveriam ser coisa de adulto.</p>
            
            <p>Além disso, muito da culpa vem das redes sociais e da TV, que mostram uma vida que nem sempre é real, fazendo a gente querer crescer rápido para ser aceita. Até os adultos acabam pressionando, querendo que a criança já tenha responsabilidade demais, sem perceber que isso pode prejudicar o crescimento saudável.
</p>   

            <p>Falando sério, acho que a gente precisa dar espaço para as crianças serem crianças mesmo — deixar elas errar, brincar e aproveitar cada fase sem tanta cobrança. A escola e os pais também têm que ajudar nisso, entendendo que a infância não pode ser roubada.</p> 
                   
        `
    },
    {
        id: 9,
        titulo: "Caminhos para o combater o etarismo nas relações sociais",
        descricao: "Estratégias para combater o preconceito etário",
        categoria: "social",
        textoCompleto: `
            <h3>Adultização infantil - consequências da perda irreparável da infância</h3>
            <p>Hoje em dia, o etarismo é algo que acontece direto, e o pior é que a gente muitas vezes nem percebe. Vejo isso quando meus avós tentam usar tecnologia e todo mundo acha que eles não entendem nada, ou quando meus amigos são desconsiderados só porque são jovens demais. Isso não é justo, né? Todo mundo precisa ser respeitado, independentemente da idade.
</p>
            
            <p>Pra mim, o primeiro passo para mudar isso é a gente aprender a valorizar a experiência de cada um. Por exemplo, conversando mais com quem já viveu mais, a gente pode aprender muita coisa que não tem no Facebook ou na escola. E claro, os mais velhos também têm que olhar para a gente e entender que a juventude tem ideias novas que podem ajudar bastante.</p>   

            <p>Na escola, poderia rolar mais debates sobre esse assunto, porque só ouvindo diferentes opiniões a gente entende melhor o que passa do outro lado. Em casa também é importante conversar sobre isso, para não deixar que esse preconceito cresça sem ninguém fazer nada.</p> 
            
                      <p>Uma ideia legal que acho que poderia ajudar é juntar jovens e idosos em projetos, para eles se conhecerem melhor, trocar ideias e respeitar as diferenças. Isso poderia até criar amizades que mudassem a maneira de pensar de muita gente.</p> 
            
        `
    },
    {
        id: 10,
        titulo: "A importância da educação financeira para os jovens",
        descricao: "Benefícios do ensino financeiro na juventude",
        categoria: "education",
        textoCompleto: `
            <h3>Caminhos para o combater o etarismo nas relações sociais</h3>
            <p>Hoje em dia, eu vejo que muitos jovens, como eu, não sabem direito como lidar com dinheiro. A gente ganha uma graninha, faz umas comprinhas e, no final do mês, não entende para onde foi tudo. Acho que isso acontece porque a educação financeira deveria ser ensinada desde o começo, para a gente não se enrolar quando crescer.</p>
            
            <p>Na minha opinião, aprender a controlar o dinheiro não é só coisa de adulto chato. É algo que ajuda a gente a entender o que é urgente e o que pode esperar, a importância de guardar um pouco para o futuro e até a evitar dívidas que depois viram um pesadelo. Por exemplo, já vi amigos entrarem no cartão de crédito sem noção e depois ficarem desesperados sem conseguir pagar.
</p>
            
            <p>Também acho que a escola podia dar mais espaço para ensinar isso. Não só aquela matemática clássica, mas mostrar como funciona o dia a dia: como fazer uma lista de gastos, o que é prioridade, ou até o que é consumo consciente. Aprender isso cedo ajuda a gente a ser mais independente e menos dependente da família para essas coisas.

</p>
            <p>Além disso, em casa, quando o assunto é dinheiro, quase ninguém fala, muitas vezes por vergonha ou medo. Se a gente tivesse mais diálogo com os pais, podia ser mais fácil aprender pelo exemplo e por conselhos reais, sem tabus.</p>

        `
    },
    {
        id: 11,
        titulo: "Desafios para a valorização da cultura popular brasileira",
        descricao: "Obstáculos e soluções para preservação cultural",
        categoria: "reflection",
        textoCompleto: `
            <h3>A importância da educação financeira para os jovens</h3>
            <p>Em cada canto do Brasil, existe uma história viva que pulsa no ritmo das festas de rua, nas vozes dos contadores de causos e nas mãos que passam adiante saberes antigos. Essa é a cultura popular brasileira, um tesouro que carrega nossa alma, mas que, infelizmente, nem sempre recebe o valor que merece. A realidade é dura: muitas vezes, o que nasce do povo é visto com descaso ou ignorado, como se não tivesse a mesma importância das expressões culturais consideradas “oficiais” ou sofisticadas.
</p>
            <p>Essa falta de valorização dói não só para quem vive dessas tradições, mas para todos nós, que perdemos um pouco de nossa identidade quando deixamos essas histórias e ritmos se apagarem. O preconceito — por parte da sociedade, das escolas e até da mídia — reforça um pensamento equivocado de que cultura popular seria algo menor, menos preparado, menos digno. Mas será que podemos medir nossa herança cultural assim? Cada samba, cada festa junina, cada folia de reis guarda em si um pedaço do nosso coração e da nossa história.</p>
            <p>Outro problema está na ausência de apoio real do poder público. Sem investimentos, muitos artistas e comunidades lutam para manter vivas tradições que já foram o sustento de seus ancestrais. É urgente que instituições escolham valorizar essas expressões, promovendo eventos, oficinas e espaços para que jovens possam se encantar e aprender, como aconteceu com seus avós.</p>
            <p>No fundo, valorizar a cultura popular é reconhecer quem somos, nossos antepassados e nossos laços. É alimentar a esperança de que o Brasil continue sendo um país colorido, diverso e cheio de vida. Enxergar a cultura do povo com respeito e carinho é o primeiro passo para garantir que ela não desapareça nas páginas da história, mas siga batendo forte no presente e no futuro.</p>
        `
    },
    {
        id: 12,
        titulo: "Caminhos para a universalização do saneamento básico no brasil",
        descricao: "Estratégias para acesso universal ao saneamento",
        categoria: "environment",
        textoCompleto: `
            <h3>Desafios para a valorização da cultura popular brasileira</h3>
            <p>Quando a gente pensa em coisas simples do dia a dia, como abrir a torneira e encontrar água limpa ou poder tomar banho sem preocupação, parece óbvio que todo mundo deveria ter isso. Mas, para muita gente no Brasil, essa realidade ainda é um privilégio que não chega. O saneamento básico, que inclui água tratada, esgoto e a coleta do lixo, é algo que faz diferença direta na saúde e na dignidade de famílias. E ver que tanta gente vive sem isso é algo que mexe com o coração.
</p>
            
            <p>Não adianta só construir tubulações e gastar dinheiro sem se importar com as pessoas que vão usar esses serviços. É importante conhecer o local, conversar com a comunidade, ensinar meninos e meninas sobre a importância de cuidar da água e do ambiente, para que tudo aquilo que começa acontecendo hoje se mantenha por toda a vida. É pensar na água como um bem precioso, não só mais um recurso qualquer.
                      </p>
            
            <p>Também precisamos cobrar que quem administra o dinheiro público faça isso com responsabilidade de verdade, para que cada centavo investido chegue de fato onde é necessário. E a união entre governo, empresas e a população é o que pode transformar esse sonho em realidade, principalmente para os que vivem longe dos grandes centros, onde o básico ainda não chegou direito.</p>
            <p>Quando o saneamento básico é para todos, a gente não só evita doenças e melhora a qualidade de vida, mas também constrói um Brasil mais justo. Afinal, viver com dignidade não pode ser um privilégio, e sim um direito de todo mundo. É preciso agir rápido para que ninguém mais precise se preocupar se a água que sai da torneira é segura para beber. Esse é um compromisso que a gente tem com o nosso povo e com o nosso futuro.</p>
            `
    },
    {
        id: 13,
        titulo: "O papel do esporte como ferramenta de transformação social",
        descricao: "O papel do esporte como ferramenta de transformação social",
        categoria: "social",
        textoCompleto: `
            <h3>caminhos para a universalização do saneamento básico no brasil</h3>
            <p>Quando penso no esporte e no que ele representa, vejo muito mais do que só competir ou ganhar troféu. Para mim, o esporte é uma chance de mudar de vida das pessoas, principalmente de que mora em lugares onde faltam oportunidades. Lá, as pessoas usam o esporte para sair da rotina, fazer amigos e aprender a ter disciplina. 
</p>
            <p>Eu já vi muitos jovens da minha idade que encontraram no esporte um jeito de acreditar em si mesmo. Jogar bola, correr ou até praticar uma dança ajuda a melhorar a autoestima e ensina a trabalhar em grupo, respeitar os outros e não desistir mesmo tendo dificuldades.
</p>
            <p>Essas lições servem para a vida toda, mas para isso acontecer mesmo, o governo e a sociedade precisam investir mais, criando espaços seguros para a prática e dando apoio para quem não tem condições de pagar academia.
</p>
            <p>Por isso, acredito que o esporte pode ajudar a transformar o mundo, porque ele une as pessoas e abre oportunidade para quem mais precisa. Não só sobre ganhar o jogo, mas sobre crescer como pessoa e ter esperança em um futuro melhor.</p>
        `
    },
    
];

let currentCategory = 'all';
let currentSearch = '';
let currentEssay = null;
let filteredEssays = [...redacoes];

document.addEventListener('DOMContentLoaded', function() {
    initializeNavigation();
    loadEssays();
    initializeSearch();
    initializeFilters();
    initializeModal();
});

function initializeNavigation() {
    const navToggle = document.querySelector('.nav-toggle');
    const navMenu = document.querySelector('.nav-menu');

    navToggle.addEventListener('click', function() {
        navMenu.classList.toggle('active');
    });

    document.querySelectorAll('.nav-link').forEach(link => {
        link.addEventListener('click', function() {
            navMenu.classList.remove('active');
            
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            this.classList.add('active');
        });
    });

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });
}

function scrollToSection(sectionId) {
    document.getElementById(sectionId).scrollIntoView({
        behavior: 'smooth'
    });
}

function loadEssays() {
    applyFiltersAndSearch();
}

function applyFiltersAndSearch() {
    const grid = document.getElementById('essaysGrid');
    
    if (currentCategory === 'all') {
        filteredEssays = [...redacoes];
    } else {
        filteredEssays = redacoes.filter(essay => essay.categoria === currentCategory);
    }

    if (currentSearch) {
        filteredEssays = filteredEssays.filter(essay =>
            essay.titulo.toLowerCase().includes(currentSearch) ||
            essay.descricao.toLowerCase().includes(currentSearch)
        );
    }
    
    renderEssaysGrid(grid);
}

function renderEssaysGrid(grid) {
    grid.innerHTML = '';
    
    filteredEssays.forEach(essay => {
        const card = document.createElement('div');
        card.className = 'essay-card';
        card.innerHTML = `
            <div class="card-header">
                <div class="card-category">${getCategoryLabel(essay.categoria)}</div>
                <div class="card-number">${essay.id + 1}</div>
                <h3 class="card-title">${essay.titulo}</h3>
                <p class="card-theme">${getCategoryDescription(essay.categoria)}</p>
            </div>
            <div class="card-body">
                <p class="card-description">${essay.descricao}</p>
                <div class="card-meta">
                    <span>Redação ${essay.id + 1}</span>
                    <span>${getCategoryLabel(essay.categoria)}</span>
                </div>
                <button class="read-btn" onclick="openEssay(${essay.id})">
                    <i class="fas fa-book-open"></i>
                    Ler Redação Completa
                </button>
            </div>
        `;
        grid.appendChild(card);
    });
}

function getCategoryLabel(category) {
    const labels = {
        'social': 'Questão Social',
        'education': 'Educação',
        'environment': 'Meio Ambiente',
        'reflection': 'Reflexão'
    };
    return labels[category] || category;
}

function getCategoryDescription(category) {
    const descriptions = {
        'social': 'Análise de questões sociais contemporâneas',
        'education': 'Reflexões sobre ensino e aprendizagem',
        'environment': 'Temas ambientais e sustentabilidade',
        'reflection': 'Pensamentos e autoconhecimento'
    };
    return descriptions[category] || '';
}

function initializeFilters() {
    document.querySelectorAll('.category-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            
            currentCategory = this.dataset.category;
            applyFiltersAndSearch();
        });
    });
}

function filterByCategory(category) {
    document.querySelectorAll('.category-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.dataset.category === category) {
            btn.classList.add('active');
        }
    });
    currentCategory = category;
    applyFiltersAndSearch();
    scrollToSection('essays');
}

function initializeSearch() {
    const searchInput = document.getElementById('searchInput');
    searchInput.addEventListener('input', function(e) {
        currentSearch = e.target.value.toLowerCase();
        applyFiltersAndSearch();
    });
}

function initializeModal() {
    document.getElementById('readingModal').addEventListener('click', function(e) {
        if (e.target === this) {
            closeModal();
        }
    });

    document.addEventListener('keydown', function(e) {
        const modal = document.getElementById('readingModal');
        if (modal.classList.contains('active')) {
            if (e.key === 'Escape') closeModal();
            if (e.key === 'ArrowLeft') previousEssay();
            if (e.key === 'ArrowRight') nextEssay();
        }
    });
}

function openEssay(id) {
    currentEssay = redacoes.find(e => e.id === id);
    if (!currentEssay) return;
    
    document.getElementById('modalTitle').textContent = currentEssay.titulo;
    document.getElementById('modalContent').innerHTML = currentEssay.textoCompleto;
    document.getElementById('readingModal').classList.add('active');
    document.body.style.overflow = 'hidden';
}

function closeModal() {
    document.getElementById('readingModal').classList.remove('active');
    document.body.style.overflow = 'auto';
}

function previousEssay() {
    if (!currentEssay) return;
    
    const currentIndex = filteredEssays.findIndex(e => e.id === currentEssay.id);
    const previousIndex = currentIndex > 0 ? currentIndex - 1 : filteredEssays.length - 1;
    
    openEssay(filteredEssays[previousIndex].id);
}

function nextEssay() {
    if (!currentEssay) return;
    
    const currentIndex = filteredEssays.findIndex(e => e.id === currentEssay.id);
    const nextIndex = currentIndex < filteredEssays.length - 1 ? currentIndex + 1 : 0;
    
    openEssay(filteredEssays[nextIndex].id);
}